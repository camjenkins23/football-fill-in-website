{% extends "layout.html" %}

{% block title %}
    Forum
{% endblock %}

{% block main %}
    <section class="f-container">
        <div class="f-banner">
            <div class="top-bar f-use">
                Welcome, {{ username }}!
            </div>
            <div class="top-bar a-title">
                <h1>
                    Forum
                </h1>
            </div>
            <form action="/logout" method="POST" class="top-bar">
                <input class="btn btn-danger" type="submit" value="Log Out">
            </form>
        </div>
        <div class="main">
            <ol>
                {% for post in posts %}
                <li class="row">
                    <a href="/thread?id={{ post[3] }}">
                        <h4 class="f-title">
                            {{ post[0] }}
                        </h4>
                        <div class="bottom">
                            <p class="username">
                                @{{ post['post_username'] }}
                            </p>
                            <p class="comment-count">
                                {{ post['comment_count'] }} comments
                            </p>
                        </div>
                    </a>
                </li>
                {% endfor %}
            </ol>
            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Create Post</button>

            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Create Post</h5>
                        </div>
                        <div class="modal-body">
                            <form action="/post" method="POST">
                                <div class="form-group">
                                    <label for="recipient-name" class="col-form-label">Title:</label>
                                    <input type="text" class="form-control" name="post-title">
                                </div>
                                <div class="form-group">
                                    <label for="message-text" class="col-form-label">Content:</label>
                                    <textarea class="form-control" name="post-text"></textarea>
                                </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal" class="fm-button">Close</button>
                            <button type="submit" class="btn btn-danger">Post</button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}